# DATABASE CONFIGURATION (The "Hybrid" Fix)
# If running in Docker, it uses 'mysqldb'. If local, it defaults to 'localhost'.
#spring.datasource.url=${DB_URL:jdbc:mysql://mysqldb:3306/moneymanage_app?allowPublicKeyRetrieval=true&useSSL=false}
spring.datasource.url=jdbc:mysql://localhost:3306/moneymanage_app
spring.datasource.username=${DB_USERNAME:root}
#spring.datasource.password=${DB_PASSWORD:root}
spring.datasource.password=${DB_PASSWORD:12345}

server.servlet.context-path=/api/v1.0

app.frontend.url=${FRONTEND_URL:http://localhost:5173}

app.backend.url=${BACKEND_URL:http://localhost:8081/api/v1.0}

# JPA CONFIGURATION
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true


# EMAIL CONFIGURATION (Hardcoded is fine for now)
spring.mail.host=smtp-relay.brevo.com
spring.mail.port=587
spring.mail.username=93380d005@smtp-brevo.com
spring.mail.password=Rq34ZHVvG2KjQa56
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.protocols=smtp
spring.mail.properties.mail.smtp.from=authn.sapuarachchi@gmail.com

# JWT CONFIGURATION
jwt.secret=${JWT_SECRET:YXV0aG5tb25leW1hbmFnZWFwcGF1dGhubW9uZXltYW5hZ2VhcHBzZWNyZXRrZXlmb3JzZWN1cml0eQ==}
jwt.expiration=36000000

# SERVER CONFIGURATION
server.port=8081

# LOGGING
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web=INFO

# FRONTEND LINKS (Prevent Crashes with Defaults)
# If variable is missing, default to localhost:5173
money.manager.frontend.url=${MONEY_MANAGER_FRONTEND_URL:http://localhost:5173}
app.activation.url=${MONEY_MANAGER_BACKEND_URL:http://localhost:8081/api/v1.0}

management.endpoints.web.exposure.include=*
# Show detailed health info (DB status, Disk space)
management.endpoint.health.show-details=always